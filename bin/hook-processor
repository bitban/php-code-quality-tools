#!/usr/bin/env php
<?php

use Bitban\GitHooks\Command\CheckCommand;
use Bitban\GitHooks\Command\FixCodeStyleCommand;
use Bitban\GitHooks\Command\InstallCommand;
use Bitban\GitHooks\Command\PostCheckoutCommand;
use Bitban\GitHooks\Command\PostMergeCommand;
use Bitban\GitHooks\Command\PreCommitCommand;
use Symfony\Component\Console\Application;

$included = include file_exists(__DIR__ . '/../vendor/autoload.php')
    ? __DIR__ . '/../vendor/autoload.php'
    : __DIR__ . '/../../../autoload.php';

if (! $included) {
    echo 'You must set up the project dependencies, run the following commands:' . PHP_EOL
        . 'curl -sS https://getcomposer.org/installer | php' . PHP_EOL
        . 'php composer.phar install' . PHP_EOL;

    exit(1);
}

$name    = 'Git Hooks Command Line Tool';
$version = '0.9.0';
$console = new Application($name, $version);
$console->addCommands([
    new CheckCommand(),
    new InstallCommand(),
    new PostCheckoutCommand(),
    new PostMergeCommand(),
    new PreCommitCommand(),

    new FixCodeStyleCommand()
]);
$console->run();
